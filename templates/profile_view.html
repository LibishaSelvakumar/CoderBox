<html>
<html lang="en">
  <head>
    <title>Coderbox</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700,900" rel="stylesheet">
    <link rel="stylesheet" href="fonts/icomoon/style.css">

    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/jquery-ui.css">
    <link rel="stylesheet" href="../static/css/owl.carousel.min.css">
    <link rel="stylesheet" href="../static/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="../static/css/owl.theme.default.min.css">

    <link rel="stylesheet" href="../static/css/jquery.fancybox.min.css">

    <link rel="stylesheet" href="../static/css/bootstrap-datepicker.css">

    <link rel="stylesheet" href="../static/fonts/flaticon/font/flaticon.css">

    <link rel="stylesheet" href="../static/css/aos.css">

    <link rel="stylesheet" href="../static/css/style.css">
    
  </head>
  <body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">
  
  <div class="site-wrap">

    <div class="site-mobile-menu site-navbar-target">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close mt-3">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>
   
    <div class="border-bottom top-bar py-2 bg-dark" id="home-section">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <p class="mb-0">
              <span class="mr-3"><strong class="text-white">Phone:</strong> <a href="tel://#">+1 234 5678 9101</a></span>
              <span><strong class="text-white">Email:</strong> <a href="#">info@yourdomain.com</a></span>
            </p>
          </div>
          <div class="col-md-6">
            <ul class="social-media">
              <li><a href="#" class="p-2"><span class="icon-facebook"></span></a></li>
              <li><a href="#" class="p-2"><span class="icon-twitter"></span></a></li>
              <li><a href="#" class="p-2"><span class="icon-instagram"></span></a></li>
              <li><a href="#" class="p-2"><span class="icon-linkedin"></span></a></li>
            </ul>
          </div>
        </div>
      </div> 
    </div>


		<header class="site-navbar py-4 bg-white site-navbar-target">
  <div class="container">
    <nav class="navbar navbar-expand-lg navbar-light">
      <a class="navbar-brand" href="index.html">Freelancer<span class="text-primary">.</span></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
         <li><a href="/profile_view" class="nav-link">Home</a></li>
		 <a href="/profile" class="nav-link">Create Profile</a></li>
				<li><a href="/profile_view" class="nav-link">Profile</a></li>
                <li><a href="/user_request" class="nav-link">Requests</a></li>
                
                <li><a href="/logout" class="nav-link">Logout</a></li>
        </ul>
      </div>
    </nav>
  </div>
</header>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="../static/js/bootstrap.min.js"></script>

  

    
<div>&nbsp;</div><div>&nbsp;</div>


    <section class="site-section bg-light" id="contact-section">
      <div class="container">
        <div class="row mb-5">
          <div class="col-12 text-center">
            <h2 class="text-black h1 site-section-heading">Job Seeker</h2>
          </div>
        </div>
        
		
		<div class="container mt-5">
    <div class="card p-4">
        {% if data %}
            <div class="text-center">
                <img align="center" id="profile_picture" 
                     src="{{ url_for('static', filename='profile/' + data[9]) }}" 
                     alt="Profile Picture" 
                     class="rounded-circle mb-3 mx-auto" 
                     style="width: 150px; height: 150px;">
                <h2 id="full_name">{{ data[1] }}</h2>  <!-- Full Name -->
                <p class="text-muted" id="job_category">{{ data[5] }}</p>  <!-- Job Category -->
            </div>
            <hr>
            <div class="row">
                <div class="col-md-6 mx-auto">
                    <p><strong>Email:</strong> <span id="email">{{ data[2] }}</span></p>
                    <p><strong>Mobile:</strong> <span id="mobile">{{ data[3] }}</span></p>
                    <p><strong>Location:</strong> <span id="location">{{ data[4] }}</span></p>
                </div>
                <div class="col-md-6 mx-auto">
                    <p><strong>Skills:</strong> <span id="skills">{{ data[6] }}</span></p>
                    <p><strong>Experience:</strong> <span id="experience">{{ data[7] }}</span> years</p>
                    <p><strong>Resume:</strong> 
                        <a id="resume_link" href="{{ url_for('static', filename='resume/' + data[8]) }}" target="_blank">View Resume</a>
                    </p>
                </div>
            </div>
        {% else %}
            <div class="text-center">
                <p class="text-muted">No details to display.</p>
                <a href="/profile" class="btn btn-primary">Create Profile</a>
            </div>
        {% endif %}
    </div>
</div>

	
      </div>
    </section>
	<p align="center"><div align="center">
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#updateProfileModal">
        Update Profile
    </button> | <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteProfileModal">
        Delete Profile
    </button>
</div></p>
	<!-- Update Profile Button -->


<!-- Update Profile Modal -->
<div class="modal fade" id="updateProfileModal" tabindex="-1" role="dialog" aria-labelledby="updateProfileModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateProfileModalLabel">Update Profile</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="updateProfileForm">
                    <div class="form-group">
                        <label for="updateFullName">Full Name</label>
                        <input type="text" class="form-control" id="updateFullName" value="{{ data[1] }}">
                    </div>
                    <div class="form-group">
                        <label for="updateEmail">Email</label>
                        <input type="email" class="form-control" id="updateEmail" value="{{ data[2] }}">
                    </div>
                    <div class="form-group">
                        <label for="updateMobile">Mobile</label>
                        <input type="text" class="form-control" id="updateMobile" value="{{ data[3] }}">
                    </div>
                    <div class="form-group">
                        <label for="updateLocation">Location</label>
                        <input type="text" class="form-control" id="updateLocation" value="{{ data[4] }}">
                    </div>
                    <div class="form-group">
                        <label for="updateSkills">Skills</label>
                        <input type="text" class="form-control" id="updateSkills" value="{{ data[6] }}">
                    </div>
                    <div class="form-group">
                        <label for="updateExperience">Experience (years)</label>
                        <input type="number" class="form-control" id="updateExperience" value="{{ data[7] }}">
                    </div>
                    <button type="button" class="btn btn-success" onclick="updateProfile()">Save Changes</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    function updateProfile() {
        var updatedData = {
            name: document.getElementById("updateFullName").value,
            email: document.getElementById("updateEmail").value,
            mobile: document.getElementById("updateMobile").value,
            location: document.getElementById("updateLocation").value,
            skills: document.getElementById("updateSkills").value,
            experience: document.getElementById("updateExperience").value
        };

        // Send updated data to Flask backend via AJAX
        fetch('/update_profile', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(updatedData)
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === "success") {
                alert("Profile updated successfully!");
                location.reload();
            } else {
                alert("Error updating profile.");
            }
        })
        .catch(error => console.log(error));
    }
</script>

<!-- Delete Profile Modal -->
<div class="modal fade" id="deleteProfileModal" tabindex="-1" role="dialog" aria-labelledby="deleteProfileModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteProfileModalLabel">Delete Profile</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete your profile? This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" onclick="deleteProfile()">Delete</button>
            </div>
        </div>
    </div>
</div>
<script>
    function deleteProfile() {
        fetch('/delete_profile', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' }
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === "success") {
                alert("Profile deleted successfully!");
                window.location.href = "/";  // Redirect to homepage or login page
            } else {
                alert("Error deleting profile.");
            }
        })
        .catch(error => console.log(error));
    }
</script>



    <a href="#" class="bg-primary py-5 d-block">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md10"><h2 class="text-white">Let's Get Started</h2></div>
        </div>
      </div>  
    </a>
    
 
    <footer class="site-footer">
      
        <div class="row pt-2 mt-2 text-center">
          <div class="col-md-12">
            
            <p>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            Copyright &copy;All rights reserved | Coderbox <i class="icon-heart text-danger" aria-hidden="true"></i> 
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
            </div>
          </div>
          
        </div>
      
    </footer>

  </div> <!-- .site-wrap -->

  <script src="../static/js/jquery-3.3.1.min.js"></script>
  <script src="../static/js/jquery-migrate-3.0.1.min.js"></script>
  <script src="../static/js/jquery-ui.js"></script>
  <script src="../static/js/popper.min.js"></script>
  <script src="../static/js/bootstrap.min.js"></script>
  <script src="../static/js/owl.carousel.min.js"></script>
  <script src="../static/js/jquery.stellar.min.js"></script>
  <script src="../static/js/jquery.countdown.min.js"></script>
  <script src="../static/js/bootstrap-datepicker.min.js"></script>
  <script src="../static/js/jquery.easing.1.3.js"></script>
  <script src="../static/js/aos.js"></script>
  <script src="../static/js/jquery.fancybox.min.js"></script>
  <script src="../static/js/jquery.sticky.js"></script>

  <script src="../static/js/typed.js"></script>
            <script>
            var typed = new Typed('.typed-words', {
            strings: ["Web Apps"," WordPress"," Mobile Apps"],
            typeSpeed: 80,
            backSpeed: 80,
            backDelay: 4000,
            startDelay: 1000,
            loop: true,
            showCursor: true
            });
            </script>

  <script src="../static/js/main.js"></script>
  


  </body>
</html>